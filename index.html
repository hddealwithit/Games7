<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Bard's Legacy</title>
    <style>
        :root { --primary: #2c3e50; --accent: #00ffcc; --glitch-bg: #0a0a0a; }
        body { font-family: 'Georgia', serif; line-height: 1.6; margin: 0; background-color: #f4f1ea; color: #333; transition: background 0.5s; }
        
        /* Navigation */
        nav { background: var(--primary); color: white; padding: 1rem 2rem; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; }
        #mainSearch { padding: 8px; border-radius: 4px; border: none; width: 220px; outline: none; }
        #aboutLink { cursor: pointer; font-weight: bold; text-decoration: none; color: white; }

        /* Article Container */
        article { max-width: 800px; margin: 40px auto; padding: 30px; background: white; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border-radius: 8px; transition: 0.3s; }
        h1 { color: #5d4037; font-size: 2.5rem; border-bottom: 1px solid #ddd; padding-bottom: 10px; }

        /* Glitch State */
        body.glitched { background-color: var(--glitch-bg); color: #444; }
        body.glitched article { background: #0f0f0f; color: #555; border: 1px solid #1a1a1a; box-shadow: none; }
        body.glitched h1 { color: #880000; border-bottom: 1px solid #222; }
        .glitch-text { font-family: 'Courier New', monospace; font-size: 0.9rem; line-height: 1.2; margin-top: 20px; }

        /* Secret Portal */
        #purpleSquare { 
            display: none; width: 6px; height: 6px; background: #800080; 
            margin: 50px auto 10px auto; cursor: crosshair; opacity: 0.5;
        }

        /* Gaming Hub */
        #gamingHub {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #050505; color: var(--accent); z-index: 1000; padding: 40px; box-sizing: border-box;
            text-align: center; overflow-y: auto; font-family: 'Courier New', Courier, monospace;
        }
        #hubSearch { padding: 15px; width: 400px; background: #111; border: 1px solid var(--accent); color: var(--accent); margin-bottom: 35px; outline: none; }
        .game-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; max-width: 1200px; margin: 0 auto; }
        .game-item { font-size: 0.9rem; cursor: pointer; padding: 12px; border: 1px solid rgba(0, 255, 204, 0.2); background: rgba(255, 255, 255, 0.02); }
        .game-item:hover { border: 1px solid var(--accent); background: rgba(0, 255, 204, 0.1); }
        .hidden { display: none !important; }

        /* Game Box */
        #gamePlayer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 3000; }
        #gameIframe { width: 100%; height: 100%; border: none; }
        .back-btn { position: absolute; top: 10px; left: 10px; z-index: 3001; background: #111; color: var(--accent); border: 1px solid var(--accent); padding: 5px 10px; cursor: pointer; }
    </style>
</head>
<body onmousemove="resetTimer()" onkeydown="resetTimer()">

<nav>
    <input type="text" id="mainSearch" placeholder="Search literary archive...">
    <a id="aboutLink">About Us</a>
</nav>

<article id="contentBody">
    <h1 id="titleText">William Shakespeare</h1>
    <div id="articleText">
        <p>William Shakespeare (1564–1616) was an English playwright, poet, and actor. He is widely regarded as the greatest writer in the English language and the world's pre-eminent dramatist.</p>
        <p>His works consist of some 39 plays, 154 sonnets, and three long narrative poems. His plays have been translated into every major living language.</p>
    </div>
    <div id="purpleSquare" onclick="openHub()"></div>
</article>

<div id="gamePlayer">
    <button class="back-btn" onclick="closeGame()">← HUB</button>
    <iframe id="gameIframe" src=""></iframe>
</div>

<div id="gamingHub">
    <h1 style="letter-spacing: 10px;">SYSTEM_OVERRIDE</h1>
    <input type="text" id="hubSearch" placeholder="LOCATING FILES..." onkeyup="filterGames()">
    <div class="game-list">
        <div class="game-item" onclick="launch('https://tomb-of-the-mask.bitbucket.io/tomb-of-the-mask/')">Tomb of Mask</div>
        <div class="game-item" onclick="launch('https://tomb-of-the-mask.bitbucket.io/drive-mad/')">Drive Mad</div>
        <div class="game-item" onclick="launch('https://tomb-of-the-mask.bitbucket.io/drift-hunters/')">Drift Hunters</div>
        <div class="game-item" onclick="launch('https://tomb-of-the-mask.bitbucket.io/1v1-lol/')">1v1.LOL</div>
        <div class="game-item" onclick="launch('https://tomb-of-the-mask.bitbucket.io/retro-bowl/')">Retro Bowl</div>
        <div class="game-item" onclick="launch('https://tomb-of-the-mask.bitbucket.io/monkey-mart/')">Monkey Mart</div>
        <div class="game-item" onclick="launch('https://tomb-of-the-mask.bitbucket.io/bitlife/')">BitLife</div>
        <div class="game-item" onclick="launch('https://tomb-of-the-mask.bitbucket.io/slope/')">Slope</div>
        <div class="game-item" onclick="launch('https://tomb-of-the-mask.bitbucket.io/eggy-car/')">Eggy Car</div>
        <div class="game-item" onclick="launch('https://tomb-of-the-mask.bitbucket.io/geometry-dash/')">Geo Dash</div>
        <div class="game-item" onclick="launch('cl1.html')">2048</div>
        <div class="game-item" onclick="launch('cl10bullets.html')">10 Bullets</div>
        <div class="game-item" onclick="launch('cl1on1soccer.html')">1 on 1 Soccer</div>
    </div>
</div>

<script>
    let idleTime = 0;
    const mainSearch = document.getElementById('mainSearch');
    const purpleSquare = document.getElementById('purpleSquare');
    const gamingHub = document.getElementById('gamingHub');

    // 1. Secret Entrance Sequence
    document.getElementById('aboutLink').addEventListener('click', () => {
        if (mainSearch.value === 'abhoy') {
            triggerGlitch();
        } else {
            alert("Educational Archive Error: 404");
        }
    });

    function triggerGlitch() {
        document.body.classList.add('glitched');
        document.getElementById('titleText').innerText = "NULL_VOID // ERR";
        let glitchContent = "";
        for(let i=0; i<50; i++) {
            glitchContent += `<p class="glitch-text">DATA CORRUPTION AT SECTOR ${Math.random().toString(16).slice(2,8)}... UNABLE TO RETRIEVE BARD_LEGACY.EXE... ${i === 25 ? "<b>I SEE YOU.</b>" : ""}</p>`;
        }
        document.getElementById('articleText').innerHTML = glitchContent;
        mainSearch.value = ""; // Clear for second step
    }

    // 2. Secret Phrase Check (No Enter Allowed)
    mainSearch.addEventListener('input', () => {
        if (document.body.classList.contains('glitched')) {
            if (mainSearch.value.toLowerCase() === "i don't like this") {
                purpleSquare.style.display = "block";
                purpleSquare.scrollIntoView({ behavior: 'smooth' });
            } else {
                purpleSquare.style.display = "none";
            }
        }
    });

    // Reset if Enter is pressed in search bar
    mainSearch.addEventListener('keypress', (e) => {
        if (e.key === "Enter") {
            window.location.reload();
        }
    });

    // 3. Hub Functions
    function openHub() {
        gamingHub.style.display = 'block';
        document.body.style.overflow = 'hidden';
    }

    function launch(url) {
        document.getElementById('gameIframe').src = url;
        document.getElementById('gamePlayer').style.display = 'block';
    }

    function closeGame() {
        document.getElementById('gamePlayer').style.display = 'none';
        document.getElementById('gameIframe').src = '';
    }

    // 4. Panic Key & Auto-Stealth
    function panic() {
        window.location.replace("https://www.google.com");
    }

    function resetTimer() {
        idleTime = 0;
    }

    setInterval(() => {
        idleTime++;
        if (idleTime >= 120) { // 2 Minutes (120 seconds)
            if (gamingHub.style.display === 'block' || document.body.classList.contains('glitched')) {
                panic();
            }
        }
    }, 1000);

    window.addEventListener('keydown', (e) => {
        if (e.key === "Tab") {
            e.preventDefault();
            panic();
        }
    });

    function filterGames() {
        const query = document.getElementById('hubSearch').value.toLowerCase();
        document.querySelectorAll('.game-item').forEach(item => {
            item.classList.toggle('hidden', !item.textContent.toLowerCase().includes(query));
        });
    }
</script>
</body>
</html>
